"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[622],{2472:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"seq-db/quickstart","title":"Quickstart","description":"Welcome to the seq-db quickstart guide! In just a few minutes, you\'ll learn how to:","source":"@site/i18n/ru/docusaurus-plugin-content-docs/current/seq-db/01-quickstart.md","sourceDirName":"seq-db","slug":"/","permalink":"/seq-db-docs/ru/","draft":false,"unlisted":false,"editUrl":"https://github.com/ozontech/seq-db/tree/main/website/docs/docs/seq-db/01-quickstart.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"quickstart","slug":"/"},"sidebar":"docs","next":{"title":"Flags","permalink":"/seq-db-docs/ru/seq-db/flags"}}');var i=s(4848),r=s(8453);const a={id:"quickstart",slug:"/"},d="Quickstart",c={},o=[{value:"Running seq-db",id:"running-seq-db",level:2},{value:"Docker image",id:"docker-image",level:3},{value:"Write documents to seq-db",id:"write-documents-to-seq-db",level:2},{value:"Writing documents using <code>curl</code>",id:"writing-documents-using-curl",level:3},{value:"Search for documents",id:"search-for-documents",level:2},{value:"What&#39;s next",id:"whats-next",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"quickstart",children:"Quickstart"})}),"\n",(0,i.jsx)(n.p,{children:"Welcome to the seq-db quickstart guide! In just a few minutes, you'll learn how to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Quickly spin up a seq-db instance"}),"\n",(0,i.jsx)(n.li,{children:"Write and store sample log messages"}),"\n",(0,i.jsx)(n.li,{children:"Query and retrieve messages using search filters"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"running-seq-db",children:"Running seq-db"}),"\n",(0,i.jsx)(n.h3,{id:"docker-image",children:"Docker image"}),"\n",(0,i.jsx)(n.p,{children:"seq-db can be quickly launched in a docker container. Pull seq-db image from Docker hub and create a container:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run --rm \\\n  -p 9002:9002 \\ # Default HTTP port\n  -p 9004:9004 \\ # Default gRPC port\n  -p 9200:9200 \\ # Default debug port\n  -it ghcr.io/ozontech/seq-db:latest --mapping auto --mode single\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Note that in this example we use a default mapping file (built into the docker image) as seq-db doesn't index any fields by default.\nThe example uses the ",(0,i.jsx)(n.code,{children:"--mode single"})," flag to run both seq-db in a single binary, rather than in cluster mode and ",(0,i.jsx)(n.code,{children:"--mapping auto"})," to index all fields as ",(0,i.jsx)(n.code,{children:"keyword"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Be aware that we set ",(0,i.jsx)(n.code,{children:"--mapping"})," to ",(0,i.jsx)(n.code,{children:"auto"})," for easier quickstart but this option is not production friendly.\nSo we encourage you to read more about ",(0,i.jsx)(n.a,{href:"/seq-db-docs/ru/seq-db/index-types",children:"mappings and how we index fields"})," and seq-db architecture and operating modes (single/cluster)."]}),"\n",(0,i.jsx)(n.h2,{id:"write-documents-to-seq-db",children:"Write documents to seq-db"}),"\n",(0,i.jsxs)(n.h3,{id:"writing-documents-using-curl",children:["Writing documents using ",(0,i.jsx)(n.code,{children:"curl"})]}),"\n",(0,i.jsxs)(n.p,{children:["seq-db supports elasticsearch ",(0,i.jsx)(n.code,{children:"bulk"})," API, so, given a seq-db single instance is listening on port 9002,\na single document can be added like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl --request POST \\\n  --url http://localhost:9002/_bulk \\\n  --header \'Content-Type: application/json\' \\\n  --data \'{"index" : {"unused-key":""}}\n{"k8s_pod": "app-backend-123", "k8s_namespace": "production", "k8s_container": "app-backend", "request": "POST", "request_uri": "/api/v1/orders", "message": "New order created successfully"}\n{"index" : {"unused-key":""}}\n{"k8s_pod": "app-frontend-456", "k8s_namespace": "production", "k8s_container": "app-frontend", "request": "GET", "request_uri": "/api/v1/products", "message": "Product list retrieved"}\n{"index" : {"unused-key":""}}\n{"k8s_pod": "payment-service-789", "k8s_namespace": "production", "k8s_container": "payment-service", "request": "POST", "request_uri": "/api/v1/payments", "message": "Payment processing failed: insufficient funds"}\n\'\n'})}),"\n",(0,i.jsx)(n.h2,{id:"search-for-documents",children:"Search for documents"}),"\n",(0,i.jsxs)(n.p,{children:["We'll wrap up this guide with a simple search query\nthat filters the ingested logs by the ",(0,i.jsx)(n.code,{children:"message"})," field."]}),"\n",(0,i.jsxs)(n.p,{children:["Note: make sure ",(0,i.jsx)(n.code,{children:"curl"})," and ",(0,i.jsx)(n.code,{children:"jq"})," are installed to run this example."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl --request POST   \\\n  --url http://localhost:9002/search \\\n  --header \'Content-Type: application/json\' \\\n  --header \'Grpc-Metadata-use-seq-ql: true\' \\\n  --data-binary @- <<EOF | jq .\n  {\n    "query":{\n      "query":"message: failed",\n      "from": "2025-02-11T10:30:00Z",\n      "to": "2030-11-25T17:50:30Z"\n    },\n    "size": 100,\n    "offset": 0\n  }\nEOF\n'})}),"\n",(0,i.jsx)(n.h2,{id:"whats-next",children:"What's next"}),"\n",(0,i.jsx)(n.p,{children:"seq-db offers many more useful features for working with logs. Here's a couple:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A custom query language - ",(0,i.jsx)(n.a,{href:"/seq-db-docs/ru/seq-db/seq-ql",children:"seq-ql"})," - that supports pipes, range queries, wildcards and more."]}),"\n",(0,i.jsx)(n.li,{children:"Built-in support for various types of aggregations: sum, avg, quantiles etc. TODO add aggregation doc?"}),"\n",(0,i.jsx)(n.li,{children:"The ability to combine multiple aggregations into a single request using complex-search TODO add link"}),"\n",(0,i.jsxs)(n.li,{children:["Document-ID based retrieval can be ",(0,i.jsx)(n.a,{href:"/seq-db-docs/ru/seq-db/public-api#fetch",children:"fetched"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>d});var t=s(6540);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);